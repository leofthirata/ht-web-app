<!-- <ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Websocket Chat
    </ion-title>
  </ion-toolbar>
</ion-header>

  <ion-content padding>
    <button ion-button full (click)="test()" >Start Websocket Client</button>
  </ion-content> -->


<ion-header [translucent]="true">
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-button>
          <ion-icon slot="icon-only" class="icon" name="add-circle"></ion-icon>
        </ion-button>
      </ion-buttons>

        <ion-title>
        Hausenn Product Test Tool
        </ion-title>

        <ion-buttons slot="end">
          <ion-button (click)="onConnectDevice()" expand="full" color="dark" >
            <ion-icon name="flash"></ion-icon>
          </ion-button>
         </ion-buttons>

        <ion-select slot="end" class="select" [(ngModel)]="product" placeholder="Choose a product">
          <ion-select-option value="one">ONE</ion-select-option>
          <ion-select-option value="lumina">Lumina</ion-select-option>
          <ion-select-option value="tbd">tbd</ion-select-option>
        </ion-select>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="wrapper">
    <div class="main">
      <ion-item>
        <ion-label><h1>Test Log</h1></ion-label>
      </ion-item>

      <div #terminal1 id="terminal1" class="term"></div>
      <ion-item>
        <ion-label><h1>Device Log</h1></ion-label>
      </ion-item>
      <div #terminal2 id="terminal2" class="term"></div>

    </div>

    <div class="menu">
      <h4 class="box-title">Test Status</h4>
      <div class="box-connect ion-text-center">
        <!-- <ion-button (click)="onRun()" color="success" expand="full"> -->
          <ng-container *ngIf="!isTesting">
            RUNNING
            <ion-spinner name="circles"></ion-spinner>
          </ng-container>
        <!-- </ion-button> -->
        <h2 [ngClass]="stateClass">{{stateEn}}</h2>
        <h2 [ngClass]="stateClass">{{stateCn}}</h2>
      </div>
      
      <h4 class="box-title">Bluetooth</h4> 
      <div class="box-connect">
        <div [hidden]="isConnectedToWifi()">
          <ion-button (click)="deviceSelectionOnClick()" expand="full" color="dark">
            CONNECT DEVICE
          </ion-button>

          <br/>

          <ion-button (click)="scanWifiOnClick()" expand="full" color="dark" [disabled]="!deviceSelected">
            SCAN WIFI
          </ion-button>

          <br/>

          <ion-button (click)="findMeOnClick()" expand="full" color="dark" [disabled]="!deviceSelected">
            FIND ME
          </ion-button>

          <br/>

          <ion-button (click)="wifiConfigAndConnectOnClick()" expand="full" color="dark" [disabled]="!deviceSelected">
            CONNECT TO WIFI
          </ion-button>
          <br/>
        </div>

        <div [hidden]="!isConnectedToWifi()">
          <ion-button (click)="getKey()" expand="block" color="dark" [disabled]="gotKey">
            GET_KEY
          </ion-button>
          <br/>
          <ion-button (click)="setSecret()" expand="block" color="dark" [disabled]="secretSet">
            SET_SECRET
          </ion-button>
          <br/>
          <ion-button (click)="registerDevice()" expand="block" color="dark" [disabled]="deviceRegistered">
            REGISTER_DEVICE
          </ion-button>
          <br/>
          <ion-button (click)="setTicket()" expand="block" color="dark" [disabled]="ticketSet">
            SET_TICKET
          </ion-button>
          <br/>
        </div>

        <ion-button (click)="onRun()" color="success" expand="full">
          <ng-container *ngIf="isTesting">
            <ion-icon slot="start" name="play"></ion-icon>
            teste
          </ng-container>
          <ng-container *ngIf="!isTesting">
            <ion-spinner name="circles"></ion-spinner>
          </ng-container>
        </ion-button>
      </div>

      <!-- <h4 class="box-title">Operation (程序)</h4>
      <div class="box-connect">
        <ion-button (click)="onBurnFirmware()" color="danger" expand="full" [disabled]="!canBurn()">
          <ng-container *ngIf="!isBurning">
            <ion-icon slot="start" name="flame-outline"></ion-icon>
            Burn FIRMWARE (烧录固件)
          </ng-container>
          <ng-container *ngIf="isBurning">
            <ion-spinner name="circles"></ion-spinner>
          </ng-container>
        </ion-button>
        <br />
        <ion-button (click)="onRun()" color="success" expand="full" [disabled]="!canRun()">
          <ng-container *ngIf="!isTesting">
            <ion-icon name="play"></ion-icon>
            RUN FCT (测试)
          </ng-container>
          <ng-container *ngIf="isTesting">
            <ion-spinner name="circles"></ion-spinner>
          </ng-container>
        </ion-button>
      </div> -->

    </div>
  </div>
</ion-content>