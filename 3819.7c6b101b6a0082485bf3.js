(self.webpackChunkht_web_app=self.webpackChunkht_web_app||[]).push([[3819],{3819:(e,t,n)=>{"use strict";n.r(t),n.d(t,{HomePageModule:()=>g});var i=n(8583),o=n(3083),c=n(665),s=n(2316);function r(e,t,n,i){return new(n||(n=Promise))(function(o,c){function s(e){try{l(i.next(e))}catch(t){c(t)}}function r(e){try{l(i.throw(e))}catch(t){c(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,r)}l((i=i.apply(e,t||[])).next())})}class l{constructor(e){this.m_mac=e,this.m_name=`${e.substring(e.length-4,e.length-2)}:${e.substring(e.length-2,e.length)}`}find(){return new Promise(e=>r(this,void 0,void 0,function*(){this.m_device=yield navigator.bluetooth.requestDevice({filters:[{name:`Hausenn ONE:${this.m_name}`},{services:[30117]}]}),this.m_device?(console.log("find true"),e(!0)):(console.log("find false"),e(!1))}))}connect(){return new Promise(e=>r(this,void 0,void 0,function*(){this.m_server=yield this.m_device.gatt.connect(),this.m_server?(e(!0),console.log("conn true")):(e(!1),console.log("conn false"))}))}disconnect(){return new Promise(e=>r(this,void 0,void 0,function*(){yield this.m_device.gatt.disconnect(),console.log("disc"),e(!0)}))}getService(){return new Promise(e=>r(this,void 0,void 0,function*(){this.m_service=yield this.m_device.gatt.getPrimaryService("000075a5-0000-1000-8000-00805f9b34fb"),console.log(this.m_service),this.m_service?(console.log("svc true"),e(!0)):(console.log("svc false"),e(!1))}))}getCharacteristics(){return new Promise(e=>r(this,void 0,void 0,function*(){this.m_readCharacteristic=yield this.m_service.getCharacteristic("3b274ac1-e910-4188-95aa-452018d93750"),this.m_writeCharacteristic=yield this.m_service.getCharacteristic("bf6d9667-bd7f-4e33-a608-21520546c82d"),console.log(this.m_readCharacteristic),console.log(this.m_writeCharacteristic),this.m_readCharacteristic&&this.m_writeCharacteristic?(console.log("chr true"),e(!0)):(console.log("chr false"),e(!1))}))}listen(){return new Promise(e=>r(this,void 0,void 0,function*(){console.log("listening");let t=yield this.m_readCharacteristic.readValue();console.log(t),e(!0)}))}scanWifi(){return new Promise(e=>r(this,void 0,void 0,function*(){console.log("before scanwifiiiiiiii");const t="75a51081a4f1c66d2f9195c85d6e02534b0333ab4bbc813cd2edf794a6c3582d1b9451a5d5";let n=new ArrayBuffer(t.length/32);for(let e=0;32*e<t.length;32*e++)n[e]=t.substring(32*e,32*(e+1));console.log(n),yield this.m_writeCharacteristic.writeValue(n),console.log("after scanwifiiiiiiii"),e(!0)}))}}class a{constructor(){}open(e){return this.m_uri=e,new Promise(t=>{this.m_ws=new WebSocket(e),this.m_ws.onopen=e=>{console.log("open:"+e),t(!0)},this.m_ws.onerror=e=>{console.log("error:"+e),t(!1)}})}send(e){return new Promise(t=>{this.m_ws.send(e),t(!0)})}ble(){(()=>{r(this,void 0,void 0,function*(){const e=yield navigator.bluetooth.requestDevice({acceptAllDevices:!0});console.log(e)})})()}}var h=n(639);const d=[{path:"",component:(()=>{class e{constructor(){}test(){return r(this,void 0,void 0,function*(){const e=new a;yield e.open("ws://localhost:8080"),e.send("bbbbbbbbbbbbbbbbbbb"),console.log("oi");const t=new l("7C9EBDD71678");yield t.find(),yield t.connect(),yield t.getService(),yield t.getCharacteristics(),yield t.scanWifi(),console.log("oi")})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-home"]],decls:7,vars:1,consts:[[3,"translucent"],["padding",""],["ion-button","","full","",3,"click"]],template:function(e,t){1&e&&(h.TgZ(0,"ion-header",0),h.TgZ(1,"ion-toolbar"),h.TgZ(2,"ion-title"),h._uU(3," Websocket Chat "),h.qZA(),h.qZA(),h.qZA(),h.TgZ(4,"ion-content",1),h.TgZ(5,"button",2),h.NdJ("click",function(){return t.test()}),h._uU(6,"Start Websocket Client"),h.qZA(),h.qZA()),2&e&&h.Q6J("translucent",!0)},directives:[o.Gu,o.sr,o.wd,o.W2],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),e})()}];let u=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[s.Bz.forChild(d)],s.Bz]}),e})(),g=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[i.ez,c.u5,o.Pc,u]]}),e})()}}]);